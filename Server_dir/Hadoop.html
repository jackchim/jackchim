<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>Jack_Chim Hadoop 开发笔记_高级_工程师_Blog_Wiki</title>
<meta name="description" content="" />
<meta name="keywords" content="" />
<link rel="stylesheet" type="text/css" href="../css/style.css" media="screen" />
<!-- <link rel="shortcut icon" href="" /> -->
<link rel='stylesheet' id='wp-pagenavi-css'  href='../css/pagenavi-css.css' type='text/css' media='all' />
<script type='text/javascript' src='../js/jquery.js'></script>


<!-- for SyntaxHighlighter core -->
<script type="text/javascript" src="../syntaxhighlighter/scripts/shCore.js"></script>
<link type="text/css" rel="stylesheet" href="../syntaxhighlighter/styles/shCore.css"/>
<!-- for SyntaxHighlighter theme -->
<link type="text/css" rel="stylesheet" href="../syntaxhighlighter/styles/shThemeDefault.css"/>
<!-- for SyntaxHighlighter syntax -->
<script type="text/javascript" src="../syntaxhighlighter/scripts/shBrushBash.js"></script>
<script type="text/javascript" src="../syntaxhighlighter/scripts/shBrushCpp.js"></script>
<script type="text/javascript" src="../syntaxhighlighter/scripts/shBrushCss.js"></script>
<script type="text/javascript" src="../syntaxhighlighter/scripts/shBrushJava.js"></script>
<script type="text/javascript" src="../syntaxhighlighter/scripts/shBrushJScript.js"></script>
<script type="text/javascript" src="../syntaxhighlighter/scripts/shBrushPhp.js"></script>
<script type="text/javascript" src="../syntaxhighlighter/scripts/shBrushPython.js"></script>
<script type="text/javascript" src="../syntaxhighlighter/scripts/shBrushXml.js"></script>
<script type="text/javascript" src="../syntaxhighlighter/scripts/shBrushSql.js"></script>

<script type="text/javascript" src="../js/jquery.js"></script>

<!-- for SyntaxHighlighter execute -->
<!-- Finally, to actually run the highlighter, you need to include this JS on your page -->
<script type="text/javascript">
     SyntaxHighlighter.all()
</script>
<meta name="generator" content="" />
</head>

<body>
<div align="center">
<div id="wrapper">
<!--// header Start-->
<div id="hd">
	<div id="sitemeta">
		<ul>
			<li class="rss"><a href="http://feed.feedsky.com/">Subscribe to articles using RSS Feed</a></li>
  		</ul>
	</div>
	<div id="titlewrapper">
		<div id="blogtitle">
			<h1><a href="../index.html">Jack Chim'Code Notes</a></h1>
		</div>
		<div id="menu">
			<ul>
				<li><div id="blogdescription"> Keep It Simple and Stupid.</div></li>
				<li><a href="../index.html">Home</a></li>
				<li class="page_item page-item-2"><a href="../about.html">About</a></li>
			</ul>
		</div>
	</div>
	<div class="clear">&nbsp;</div>

	<div class="clear">&nbsp;</div>
</div>
<!--// header End-->


<!--// sidebar Start-->
<div id="sidebar" class="yui-b">
<ul class="sidebar">
<li id="search-3" class="widget widget_search"><form method="get" id="searchform" action="">
<input type="text" size="14" value="" name="s" id="s" class="s" />
<input type="submit" id="searchsubmit" value="GO" />
</form>
<BR><BR></li>
<li id="tag_cloud-3" class="widget widget_tag_cloud"><h2 class="widgettitle">Me</h2>
<br>
<div class="tagcloud">

	<span class="icons_github"></span> <a href='https://github.com/ziikii' target="_blank"  >GitHub </a><br>
	<span class="icons_twitter"></span> <a href='https://twitter.com/jack_chim'  target="_blank" >Twitter </a> <br>
	<span class="icons_linkedin"></span> <a href='http://www.linkedin.com/in/jackchim' target="_blank"  >Linkedin </a><br>
	<span class="icons_sinaweibo"></span> <a href='http://weibo.com/u/1893763090' target="_blank" >Sina Weibo</a><br>
	<span class="icons_mail"></span>     <a href='#'  target="_blank" >Mail:ziikii1#qq.com</a><br>

</div>
</li>
<br>
<li id="categories-4" class="widget widget_categories"><h2 class="widgettitle">Categories</h2>
		<ul>
<li class="cat-item cat-item-67"><a href="../Programming_dir/Programming.html" >Programming</a></li>
<li class="cat-item cat-item-6"><a href="../Security_dir/Security.html" >Security</a></li>
<li class="cat-item cat-item-6"><a href="../Database_dir/Database.html" >Database</a></li>
<li class="cat-item cat-item-6"><a href="../Docs_dir/Docs.html" >Docs</a></li>
<li class="cat-item cat-item-6"><a href="../Desktop_dir/Desktop.html" >Desktop</a></li>
<li class="cat-item cat-item-6"><a href="../OS_dir/OS.html" >OS</a></li>
<li class="cat-item cat-item-6"><a href="../Web_dir/Web.html" >Web</a></li>
<li class="cat-item cat-item-6"><a href="../Develop_dir/Develop.html" >Develop/Tools</a></li>
<li class="cat-item cat-item-6"><a href="../Server_dir/Server.html" >Server</a></li>
<li class="cat-item cat-item-6"><a href="../Editor_dir/Editor.html" >Editor</a></li>
<li class="cat-item cat-item-6"><a href="../Design_dir/Design.html" >Design</a></li>
<li class="cat-item cat-item-6"><a href="../English_dir/English.html" >English notes</a></li>

		</ul>
</li>

<li id="archives-4" class="widget widget_archive"><h2 class="widgettitle"><a href="../diary/diary.html" target="_blank">Diary</a></h2>
		<ul>
	<li><a href='../diary/2012.html' title=''>2012 Year</a></li>
	<li><a href='../diary/2011.html' title=''>2011 Year</a></li>
		</ul>
</li>
<li id="linkcat-2" class="widget widget_links"><h2 class="widgettitle">Site & Tools</h2>

	<ul class='xoxo blogroll'>
<li><a href="http://stackoverflow.com/" target="_blank">Stackoverflow </a></li>
<li><a href="http://www.ostools.net/">ostools</a></li>

	</ul>
</li>

</ul>
</div>
<!--// sidebar End-->



<!--// content Start-->
<div id="content">

<h1 ><a  href="">Hadoop</a> Page</h1>

<ol>
<li>
<a href="http://hadoop.apache.org/">http://hadoop.apache.org/</a>

</ol>




<hr />
<h2 id="toc_0.1">Tools</h2>

<ol>
<li>
balance

<li>
phpHiveAdmin

<li>
EasyHadoop

<li>
ganglia - 集群汇总监控用的的软件

</ol>

<hr />
<h2 id="toc_0.2">版本新增特性</h2>
<ul>
<li>
hadoop 2.0 新增 map/reduce V2

</ul>

<hr />
<h2 id="toc_0.3">配置环境变量</h2>

<p>
vim /etc/profile 
</p>
<pre>
      export JAVA_HOME=/usr/lib/jvm/java-1.7.0-openjdk-1.7.0.9/jre
      export PATH=$JAVA_HOME/bin:$PATH
      export HADOOP_HOME=/home/hadoop
      export PATH=$PATH:$HADOOP_HOME/bin
</pre>

<p>
让环境变量生效 
</p>

<p>
<code>source /etc/profile</code>
</p>

<hr />






<hr />
<h2 id="toc_0.4">编译安装</h2>
<p>
depend on
</p>
<ul>
<li>
Jdk

</ul>

<p>
<strong>添加hadoop用户</strong>
</p>
<pre>
     groupadd hadoop 
     useradd -g hadoop -m hadoop 
     chown -R hadoop:hadoop /home/hadoop 
     su - hadoop 
</pre>

<p>
搜索并安装jdk
</p>
<pre>
      yum search jdk
      yum install java-1.7.0-openjdk
</pre>

<p>
查看jdk安装相关目录 <code>rpm -ql java-1.7.0-openjdk</code>
</p>


<p>
安装
</p>
<pre>
      cd /home
      wget -c http://apache.etoak.com/hadoop/common/hadoop-1.1.0/hadoop-1.1.0.tar.gz 
      tar zxvf hadoop-1.1.0.tar.gz 
      mv hadoop-1.1.0 hadoop 
      cd hadoop
      mkdir tmp
      mkdir hdfs
      mkdir hdfs/name
      mkdir hdfs/data 
</pre>

<p>
<strong>配置文件</strong>
</p>


<p>
vim conf/hadoop-env.sh 
</p>
<pre>
      export JAVA_HOME=/usr/lib/jvm/java-1.7.0-openjdk-1.7.0.9/jre
</pre>


<p>
add to conf/core-site.xml
</p>
<pre class="brush:xml">
&lt;property&gt;  
&lt;name&gt;fs.default.name&lt;/name&gt;  
&lt;value&gt;hdfs://localhost:9000&lt;/value&gt;  
&lt;/property&gt;
&lt;property&gt;
&lt;name&gt;dfs.permissons&lt;/name&gt;
&lt;value&gt;false&lt;/value&gt;
&lt;/property&gt;
&lt;property&gt;
&lt;name&gt;hadoop.tmp.dir&lt;/name&gt;
&lt;value&gt;/home/hadoop/tmp&lt;/value&gt;
&lt;/property&gt;
</pre>

<p>
vim conf/hdfs-site.xml 
</p>
<pre class="brush:xml">
&lt;property&gt;
&lt;name&gt;dfs.replication&lt;/name&gt;
&lt;value&gt;1&lt;/value&gt;
&lt;/property&gt;

&lt;property&gt;
&lt;name&gt;dfs.permissons&lt;/name&gt;
&lt;value&gt;false&lt;/value&gt;
&lt;/property&gt;

&lt;property&gt;
&lt;name&gt;dfs.name.dir&lt;/name&gt;
&lt;value&gt;/home/hadoop/hdfs/name&lt;/value&gt;
&lt;/property&gt;

&lt;property&gt;
&lt;name&gt;dfs.data.dir&lt;/name&gt;
&lt;value&gt;/home/hadoop/hdfs/data&lt;/value&gt;
&lt;/property&gt;
</pre>

<p>
add to conf/mapred-site.xml
</p>
<pre class="brush:xml">
&lt;property&gt;
&lt;name&gt;mapred.job.tracker&lt;/name&gt;
&lt;value&gt;localhost:9001&lt;/value&gt;
&lt;/property&gt;

&lt;property&gt;
&lt;name&gt;mapred.local.dir&lt;/name&gt;
&lt;value&gt;/home/hadoop/tmp&lt;/value&gt;
&lt;/property&gt; 

&lt;property&gt;
&lt;name&gt;mapreduce.cluster.temp.dir&lt;/name&gt;
&lt;value&gt;&lt;/value&gt;
&lt;description&gt;No description&lt;/description&gt;
&lt;final&gt;true&lt;/final&gt;
&lt;/property&gt;

&lt;property&gt;
&lt;name&gt;mapreduce.cluster.locl.dir&lt;/name&gt;
&lt;value&gt;&lt;/value&gt; 
&lt;description&gt;No description&lt;/description&gt;
&lt;final&gt;true&lt;/final&gt;
&lt;/property&gt;
</pre>

<p>
add to conf/yarn-site.xml 
</p>
<pre class="brush:xml">
&lt;property&gt;
    &lt;name&gt;yarn.resourcemanager.resource-tracker.address&lt;/name&gt;
    &lt;value&gt;host:port&lt;/value&gt;
    &lt;description&gt;host is the hostname of the resource manager and 
    port is the port on which the NodeManagers contact the Resource Manager.
    &lt;/description&gt;
  &lt;/property&gt;

  &lt;property&gt;
    &lt;name&gt;yarn.resourcemanager.scheduler.address&lt;/name&gt;
    &lt;value&gt;host:port&lt;/value&gt;
    &lt;description&gt;host is the hostname of the resourcemanager and port is the port
    on which the Applications in the cluster talk to the Resource Manager.
    &lt;/description&gt;
  &lt;/property&gt;

  &lt;property&gt;
    &lt;name&gt;yarn.resourcemanager.scheduler.class&lt;/name&gt;
    &lt;value&gt;org.apache.hadoop.yarn.server.resourcemanager.scheduler.capacity.CapacityScheduler&lt;/value&gt;
    &lt;description&gt;In case you do not want to use the default scheduler&lt;/description&gt;
  &lt;/property&gt;

  &lt;property&gt;
    &lt;name&gt;yarn.resourcemanager.address&lt;/name&gt;
    &lt;value&gt;host:port&lt;/value&gt;
    &lt;description&gt;the host is the hostname of the ResourceManager and the port is the port on
    which the clients can talk to the Resource Manager. &lt;/description&gt;
  &lt;/property&gt;

  &lt;property&gt;
    &lt;name&gt;yarn.nodemanager.local-dirs&lt;/name&gt;
    &lt;value&gt;&lt;/value&gt;
    &lt;description&gt;the local directories used by the nodemanager&lt;/description&gt;
  &lt;/property&gt;

  &lt;property&gt;
    &lt;name&gt;yarn.nodemanager.address&lt;/name&gt;
    &lt;value&gt;0.0.0.0:port&lt;/value&gt;
    &lt;description&gt;the nodemanagers bind to this port&lt;/description&gt;
  &lt;/property&gt;  

  &lt;property&gt;
    &lt;name&gt;yarn.nodemanager.resource.memory-mb&lt;/name&gt;
    &lt;value&gt;10240&lt;/value&gt;
    &lt;description&gt;the amount of memory on the NodeManager in GB&lt;/description&gt;
  &lt;/property&gt;
 
  &lt;property&gt;
    &lt;name&gt;yarn.nodemanager.remote-app-log-dir&lt;/name&gt;
    &lt;value&gt;/app-logs&lt;/value&gt;
    &lt;description&gt;directory on hdfs where the application logs are moved to &lt;/description&gt;
  &lt;/property&gt;

   &lt;property&gt;
    &lt;name&gt;yarn.nodemanager.log-dirs&lt;/name&gt;
    &lt;value&gt;&lt;/value&gt;
    &lt;description&gt;the directories used by Nodemanagers as log directories&lt;/description&gt;
  &lt;/property&gt;

  &lt;property&gt;
    &lt;name&gt;yarn.nodemanager.aux-services&lt;/name&gt;
    &lt;value&gt;mapreduce.shuffle&lt;/value&gt;
    &lt;description&gt;shuffle service that needs to be set for Map Reduce to run &lt;/description&gt;
  &lt;/property&gt;
</pre>

<hr />
<h2 id="toc_0.5">ssh</h2>

<p>
shell
</p>
<pre>
      cd ~/.ssh 
      ssh-keygen -t rsa -f ~/.ssh/id_rsa.node -C "Key for Work node"
      cp id_rsa.node.pub authorized_keys
      chmod 600 authorized_keys 
      scp authorized_keys root@node_ip://root/.ssh

</pre>

<p>
vim ~/.ssh/config 
</p>
<pre>
      Host node_ip
      IdentityFile ~/.ssh/id_rsa.node 
      User root
</pre>

<p>
<code>chmod 600 ~/.ssh/config</code>
</p>

<hr />
<h2 id="toc_0.6">启动</h2>

<p>
第一次启动之前需要进行格式化文件系统,格式化一个新的分布式文件系统
</p>

<p>
<code>hadoop namenode -format</code>
</p>

<p>
<strong>启动Hadoop</strong>
</p>
<ul>
<li>
bin/start-all.sh 

<li>
bin/start-dfs.sh 

<li>
bin/start-balancer.sh 

<li>
bin/start-jobhistoryserver.sh 

<li>
bin/start-mapred.sh 

</ul>

<p>
<strong>停止Hadoop</strong>
</p>
<ul>
<li>
bin/stop-all.sh 

<li>
bin/stop-balancer.sh 

<li>
bin/stop-dfs.sh 

<li>
bin/stop-jobhistoryserver.sh 

<li>
bin/stop-mapred.sh 

</ul>

<p>
<strong>daemon runing</strong>
</p>
<ul>
<li>
hadoop-daemon.sh start datanode 

<li>
hadoop-daemon.sh start tasktracker

<li>
hadoop-daemon.sh start namenode 

<li>
hadoop-daemon.sh start secondarynamenode 

<li>
hadoop-daemon.sh start tasktracker 

<li>
hadoop dfsadmin -safemode leave

</ul>


<p>
简单的第一次启动
</p>
<pre>
hadoop namenode -format 
bin/start-all.sh 
hadoop dfs -mkdir testdir 
hadoop dfs -ls
</pre>

<hr />
<h2 id="toc_0.7">命令 command</h2>

<p>
<strong>Hadoop</strong>
</p>
<ul>
<li>
创建文件目录 <code>hadoop fs -mkdir /user/admin/aaron/newDir</code>

<li>
删除文件 <code>hadoop fs -rm /user/admin/aaron/needDelete</code>

<li>
上传文件 <code>hadoop fs  -put [本地地址] [hadoop目录] </code>

<li>
下载文件 <code>hadoop fs -get /user/admin/aaron/newFile /home/admin/newFile</code>

<li>
将hadoop上某个文件重命名 <code>hadoop  fs  -mv  /user/test.txt  /user/ok.txt </code>

</ul>




<hr />
<h2 id="toc_0.8">默认端口及Web界面</h2>
<ul>
<li>
<a href="http://localhost:50030/">http://localhost:50030/</a> – web UI for MapReduce job tracker(s)

<li>
<a href="http://localhost:50060/">http://localhost:50060/</a> – web UI for task tracker(s)

<li>
<a href="http://localhost:50070/">http://localhost:50070/</a> – web UI for HDFS name node(s)

</ul>

<hr />
<h2 id="toc_0.9">hosts列表</h2>

<p>
vim /etc/hosts 
</p>

<pre>
      192.169.146.128  hadoop_master
</pre>


<hr />
<h2 id="toc_0.10">集群 Cluster</h2>



<hr />
<h2 id="toc_0.11">资料</h2>
<ul>
<li>
<a href="http://blog.csdn.net/azhao_dn">http://blog.csdn.net/azhao_dn</a>

<li>
<a href="http://slaytanic.blog.51cto.com/">http://slaytanic.blog.51cto.com/</a>

<li>
<a href="http://lib.open-open.com/list/220">http://lib.open-open.com/list/220</a>

</ul>


<!--// commentwrap Start-->
<!-- 加载duoshuo.com 评论插件 -->
<div id="commentwrap">
<h2>Leave a comment?</h2>
<hr>
    <div id="disqus_thread" style=""></div>

<script type="text/javascript">
    /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */

    var disqus_shortname = 'jackchim'; // required: replace example with your forum shortname

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>


        
</div>
<!--// commentwrap End-->

</div>
<!--// content  End-->
<!--// footer Start-->
<div class="clear">&nbsp;</div>
<div id="footnote" align="center">
	  Cheers!! Vimwiki  © Copyright 2012 Jack Chim. All Rights Reserved.
</div>
<!--// footer End-->
<!-- http://blog.sonitech.org/2011/07/06/sshscp-through-gateway/ -->
</div>

</div>
<a href="javascript:;" id="returnTop" style="bottom: 200px;">回到顶部</a>
<script type="text/javascript">
$(document).ready(function(){
    initTxt();
    //$('#returnTop').hide();
    $(window).scroll(function(){
        if($(document).scrollTop()>=100){
            if($.browser.msie&&($.browser.version == "6.0")){
                $('#returnTop').css("_top","expression(eval(document.documentElement.scrollTop+(document.documentElement.clientHeight/2)-this.offsetHeight-(parseInt(this.currentStyle.marginTop,10)||0)-(parseInt(this.currentStyle.marginBottom,10)||0))-0);");
            }
            $('#returnTop').animate({bottom:"200px"},{ queue: false, duration: 10 });
        }else{
            $('#returnTop').css("_top","1000");
            $('#returnTop').animate({bottom:"-200px"},{ queue: false, duration: 10 });
        }
    });
    $('#returnTop').click(function(){
        $('html, body').animate({scrollTop:0}, 'slow');
        return false;
    });
 
     
});
 
function initTxt(){
    for(var i=0;i<=300;i++){
        $("#bigBox").append("<p>这是第"+i+"行</p>");
    }
}
</script>
</body>
</html>

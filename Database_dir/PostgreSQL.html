<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>Jack_Chim PostgreSQL 开发笔记_高级_工程师_Blog_Wiki</title>
<meta name="description" content="" />
<meta name="keywords" content="" />
<link rel="stylesheet" type="text/css" href="../css/style.css" media="screen" />
<!-- <link rel="shortcut icon" href="" /> -->
<link rel='stylesheet' id='wp-pagenavi-css'  href='../css/pagenavi-css.css' type='text/css' media='all' />
<script type='text/javascript' src='../js/jquery.js'></script>


<!-- for SyntaxHighlighter core -->
<script type="text/javascript" src="../syntaxhighlighter/scripts/shCore.js"></script>
<link type="text/css" rel="stylesheet" href="../syntaxhighlighter/styles/shCore.css"/>
<!-- for SyntaxHighlighter theme -->
<link type="text/css" rel="stylesheet" href="../syntaxhighlighter/styles/shThemeDefault.css"/>
<!-- for SyntaxHighlighter syntax -->
<script type="text/javascript" src="../syntaxhighlighter/scripts/shBrushBash.js"></script>
<script type="text/javascript" src="../syntaxhighlighter/scripts/shBrushCpp.js"></script>
<script type="text/javascript" src="../syntaxhighlighter/scripts/shBrushCss.js"></script>
<script type="text/javascript" src="../syntaxhighlighter/scripts/shBrushJava.js"></script>
<script type="text/javascript" src="../syntaxhighlighter/scripts/shBrushJScript.js"></script>
<script type="text/javascript" src="../syntaxhighlighter/scripts/shBrushPhp.js"></script>
<script type="text/javascript" src="../syntaxhighlighter/scripts/shBrushPython.js"></script>
<script type="text/javascript" src="../syntaxhighlighter/scripts/shBrushXml.js"></script>
<script type="text/javascript" src="../syntaxhighlighter/scripts/shBrushSql.js"></script>

<script type="text/javascript" src="../js/jquery.js"></script>

<!-- for SyntaxHighlighter execute -->
<!-- Finally, to actually run the highlighter, you need to include this JS on your page -->
<script type="text/javascript">
     SyntaxHighlighter.all()
</script>
<meta name="generator" content="" />
</head>

<body>
<div align="center">
<div id="wrapper">
<!--// header Start-->
<div id="hd">
	<div id="sitemeta">
		<ul>
			<li class="rss"><a href="http://feed.feedsky.com/">Subscribe to articles using RSS Feed</a></li>
  		</ul>
	</div>
	<div id="titlewrapper">
		<div id="blogtitle">
			<h1><a href="../index.html">Jack Chim'Code Notes</a></h1>
		</div>
		<div id="menu">
			<ul>
				<li><div id="blogdescription"> Keep It Simple and Stupid.</div></li>
				<li><a href="../index.html">Home</a></li>
				<li class="page_item page-item-2"><a href="../about.html">About</a></li>
			</ul>
		</div>
	</div>
	<div class="clear">&nbsp;</div>

	<div class="clear">&nbsp;</div>
</div>
<!--// header End-->


<!--// sidebar Start-->
<div id="sidebar" class="yui-b">
<ul class="sidebar">
<li id="search-3" class="widget widget_search"><form method="get" id="searchform" action="">
<input type="text" size="14" value="" name="s" id="s" class="s" />
<input type="submit" id="searchsubmit" value="GO" />
</form>
<BR><BR></li>
<li id="tag_cloud-3" class="widget widget_tag_cloud"><h2 class="widgettitle">Me</h2>
<br>
<div class="tagcloud">

	<span class="icons_github"></span> <a href='https://github.com/ziikii' target="_blank"  >GitHub </a><br>
	<span class="icons_twitter"></span> <a href='https://twitter.com/jack_chim'  target="_blank" >Twitter </a> <br>
	<span class="icons_linkedin"></span> <a href='http://www.linkedin.com/in/jackchim' target="_blank"  >Linkedin </a><br>
	<span class="icons_sinaweibo"></span> <a href='http://weibo.com/u/1893763090' target="_blank" >Sina Weibo</a><br>
	<span class="icons_mail"></span>     <a href='#'  target="_blank" >Mail:ziikii1#qq.com</a><br>

</div>
</li>
<br>
<li id="categories-4" class="widget widget_categories"><h2 class="widgettitle">Categories</h2>
		<ul>
<li class="cat-item cat-item-67"><a href="../Programming_dir/Programming.html" >Programming</a></li>
<li class="cat-item cat-item-6"><a href="../Security_dir/Security.html" >Security</a></li>
<li class="cat-item cat-item-6"><a href="../Database_dir/Database.html" >Database</a></li>
<li class="cat-item cat-item-6"><a href="../Docs_dir/Docs.html" >Docs</a></li>
<li class="cat-item cat-item-6"><a href="../Desktop_dir/Desktop.html" >Desktop</a></li>
<li class="cat-item cat-item-6"><a href="../OS_dir/OS.html" >OS</a></li>
<li class="cat-item cat-item-6"><a href="../Web_dir/Web.html" >Web</a></li>
<li class="cat-item cat-item-6"><a href="../Develop_dir/Develop.html" >Develop/Tools</a></li>
<li class="cat-item cat-item-6"><a href="../Server_dir/Server.html" >Server</a></li>
<li class="cat-item cat-item-6"><a href="../Editor_dir/Editor.html" >Editor</a></li>
<li class="cat-item cat-item-6"><a href="../Design_dir/Design.html" >Design</a></li>
<li class="cat-item cat-item-6"><a href="../English_dir/English.html" >English notes</a></li>

		</ul>
</li>

<li id="archives-4" class="widget widget_archive"><h2 class="widgettitle"><a href="../diary/diary.html" target="_blank">Diary</a></h2>
		<ul>
	<li><a href='../diary/2012.html' title=''>2012 Year</a></li>
	<li><a href='../diary/2011.html' title=''>2011 Year</a></li>
		</ul>
</li>
<li id="linkcat-2" class="widget widget_links"><h2 class="widgettitle">Site & Tools</h2>

	<ul class='xoxo blogroll'>
<li><a href="http://stackoverflow.com/" target="_blank">Stackoverflow </a></li>
<li><a href="http://www.ostools.net/">ostools</a></li>

	</ul>
</li>

</ul>
</div>
<!--// sidebar End-->



<!--// content Start-->
<div id="content">

<h1 ><a  href="">PostgreSQL</a> Page</h1>

<ol>
<li>
<a href="http://www.postgresql.org/">PostgreSQL</a> -  官网

<li>
<a href="http://www.postgresql.org/docs/9.2/interactive/index.html">PostgreSQL 9.2.1 Documentation</a>

<li>
<a href="http://wiki.postgresql.org/">PostgreSQL wiki</a>

</ol>
<hr />
<h2 id="toc_0.1">Tools</h2>
<p>
<strong>PostgreSQL 自带工具</strong>
</p>
<ul>
<li>
<a href="pg_dump.html">pg_dump</a>

<li>
<a href="pg_restore.html">pg_restore</a>

<li>
<a href="pg_ctl.html">pg_ctl</a>

</ul>

<p>
<strong>管理</strong>
</p>
<ul>
<li>
<a href="phppgadmin.html">phppgadmin</a> - web管理

</ul>

<p>
pgBadger - PostgreSQL日志分析程序 
</p>

<p>
<strong>监控</strong>
</p>
<ul>
<li>
<a href="ptop.html">ptop</a>

<li>
<a href="pg_top.html">pg_top</a>

<li>
pgwatch - 简单易用的 PostgreSQL 的监控工具

</ul>

<p>
<strong>python</strong>
</p>

<ul>
<li>
psycopg 是一个 PostgreSQL 数据库的Python语言的接口

<li>
PyGreSQL 是一个开源的 Python 模块用来访问 PostgreSQL 数据库

</ul>
<hr />
<h2 id="toc_0.2">yum 安装</h2>
<pre>
      yum install postgresql 
</pre>

<p>
版本
</p>
<ul>
<li>
postgresql - client libraries and client binaries

<li>
postgresql-server - core database server

<li>
postgresql-contrib - additional supplied modules

<li>
postgresql-devel - libraries and headers for C language development

</ul>

<hr />
<h2 id="toc_0.3">编译安装</h2>

<p>
依赖的库 
</p>
<ul>
<li>
libperl

<li>
perl

<li>
libpython

<li>
libxml

<li>
readline-devel

</ul>

<pre>
      yum -y install libperl perl libpython libxml readline-devel readline
</pre>

<p>
configure参数
</p>
<pre>
      ./configure --prefix=/usr/local/pgsql --bindir=/usr/local/pgsql/bin --with-python  --with-libxml 
</pre>

<p>
configure 帮助 <code>./configure -h</code>
</p>

<p>
编译安装命令
</p>
<pre>
cd path_to_postgresql/
./configure --prefix=/usr/local/pgsql --bindir=/usr/local/pgsql/bin --with-python  --with-libxml 
gmake
su 
gmake install 
adduser postgres 
mkdir /usr/local/pgsql/data 
chown postgres /usr/local/pgsql/data 
su - postgres 
/usr/local/pgsql/bin/initdb -D /usr/local/pgsql/data 
/usr/local/pgsql/bin/postgres -D /usr/local/pgsql/data &gt;logfile 2&gt;&amp;1 &amp;
/usr/local/pgsql/bin/createdb test 
/usr/local/pgsql/bin/psql test


</pre>

<p>
默认数据
</p>
<ul>
<li>
doc /usr/local/doc/postgresql 

<li>
监听端口默认为5432

</ul>


<hr />
<h2 id="toc_0.4">Environment Variables</h2>

<p>
设置环境变量和共享库路径
</p>

<p>
编辑添加postgres用户的
</p>

<p>
<strong>~/.bash_profile</strong>
</p>
<pre>
     PATH=/usr/local/pgsql/bin:$PATH 
     export PATH
</pre>

<p>
全局则添加到/etc/profile文件中
</p>

<p>
<strong>~/.bashrc alias</strong>
</p>

<pre>
      alias pgstart='pg_ctl -D /usr/local/pgsql/data start'
      alias pgstop='kill `cat /usr/local/pgsql/data/postmaster.pid`'
      alias pgreload='pg_ctl reload -D /usr/local/pgsql/data '
      alias pgstatus='pg_ctl status -D /usr/local/pgsql/data'
</pre>

<hr />
<h2 id="toc_0.5">操作命令 SQL commands</h2>

<p>
<strong>库操作</strong>
</p>
<ul>
<li>
建立数据库 <code>createdb db_name</code>

</ul>

<p>
<strong>表操作</strong>
</p>
<ul>
<li>
建立表 <code>CREATE TABLE TABLE_NAME ( id varchar(20), name varchar(30));</code>

<li>
显示表内容 <code>SELECT * FROM TABLE_NAME;</code>

</ul>

<p>
创建用户 <code>createuser -d -a -P root</code>
</p>

<table>
<tr>
<th>
参数
</th>
<th>
说明
</th>
</tr>
<tr>
<td>
-d, --createdb
</td>
<td>
role can create new databases
</td>
</tr>
<tr>
<td>
-c, --connection-limit=N
</td>
<td>
connection limit for role (default: no limit)
</td>
</tr>
<tr>
<td>
-D, --no-createdb
</td>
<td>
role cannot create databases (default)
</td>
</tr>
<tr>
<td>
-e, --echo
</td>
<td>
show the commands being sent to the server
</td>
</tr>
<tr>
<td>
-E, --encrypted
</td>
<td>
encrypt stored password
</td>
</tr>
<tr>
<td>
-i, --inherit
</td>
<td>
role inherits privileges of roles it is a member of (default)
</td>
</tr>
<tr>
<td>
-I, --no-inherit
</td>
<td>
role does not inherit privileges
</td>
</tr>
<tr>
<td>
-l, --login
</td>
<td>
role can login (default)
</td>
</tr>
<tr>
<td>
-L, --no-login
</td>
<td>
role cannot login
</td>
</tr>
<tr>
<td>
-N, --unencrypted
</td>
<td>
do not encrypt stored password
</td>
</tr>
<tr>
<td>
-P, --pwprompt
</td>
<td>
assign a password to new role
</td>
</tr>
<tr>
<td>
-r, --createrole
</td>
<td>
role can create new roles
</td>
</tr>
<tr>
<td>
-R, --no-createrole
</td>
<td>
role cannot create roles (default)
</td>
</tr>
<tr>
<td>
-s, --superuser
</td>
<td>
role will be superuser
</td>
</tr>
<tr>
<td>
-S, --no-superuser
</td>
<td>
role will not be superuser (default)
</td>
</tr>
<tr>
<td>
--interactive
</td>
<td>
prompt for missing role name and attributes rather than using defaults
</td>
</tr>
<tr>
<td>
--replication
</td>
<td>
role can initiate replication
</td>
</tr>
<tr>
<td>
--no-replication
</td>
<td>
role cannot initiate replication
</td>
</tr>
</table>



<hr />
<h2 id="toc_0.6">管理命令</h2>
<p>
stop server 
</p>

<pre>
kill `cat /usr/local/pgsql/data/postmaster.pid`
</pre>

<p>
启动postgresql
</p>

<p>
<code>service postgresql start</code>
</p>

<p>
查看状态
</p>

<p>
<code>ps aux | grep postgre</code>
</p>

<p>
查看监听端口
</p>

<p>
<code>netstat -ano | grep 5432</code>
</p>

<p>
链接数据库 
</p>
<ul>
<li>
<code>psql testdb</code>

<li>
<code>psql -U root -W test_db</code>

</ul>
<p>
参数 
</p>
<ul>
<li>
-h, --host=HOSTNAME       database server host or socket directory

<li>
-p, --port=PORT           database server port

<li>
-U, --username=USERNAME   user name to connect as (not the one to create)

<li>
-w, --no-password         never prompt for password

<li>
-W, --password            force password prompt

</ul>

<p>
退出 psql <code>\q</code>
</p>



<hr />
<h2 id="toc_0.7">PostgreSQL集群</h2>
<ol>
<li>
<a href="Postgres-XC.html">Postgres-XC</a>

<li>
pgcluster

<li>
Bucardo

<li>
PL_Proxy

</ol>


<p>
资料
</p>
<ul>
<li>
<a href="http://www.oschina.net/question/12_5491">http://www.oschina.net/question/12_5491</a>

<li>
<a href="http://blog.osdba.net/?post=72">http://blog.osdba.net/?post=72</a>

</ul>


<hr />
<h2 id="toc_0.8">postgresql.conf 配置文件优化</h2>

<p>
内存相关的参数配置
</p>
<ul>
<li>
shared_buffers(integer) 推荐将该值设置为系统内存的25%

<li>
work_mem(integer)

<li>
maintence_work_mem(integer)

</ul>


<hr />
<h2 id="toc_0.9">分支&amp;版本</h2>
<ol>
<li>
EnterpriseDB

</ol>

<hr />
<h2 id="toc_0.10">project</h2>
<ol>
<li>
Typecho

</ol>

<hr />
<h2 id="toc_0.11">php</h2>
<p>
php操作postgresql函数
</p>
<ul>
<li>
pg_connect("host=localhost dbname=postgres user=postgres password=831025")

<li>
pg_query()

<li>
pg_fetch_array()

<li>
pg_free_result()

<li>
pg_close()

</ul>




<hr />
<h2 id="toc_0.12">Books</h2>
<ul>
<li>
PostgreSQL 9 High Performance.pdf

<li>
PostgreSQL 9 Administration Cookbook.pdf

</ul>

<hr />
<h2 id="toc_0.13">doc</h2>
<ul>
<li>
<a href="http://blog.csdn.net/xiaocaoqiqi/article/details/1824305">http://blog.csdn.net/xiaocaoqiqi/article/details/1824305</a>

<li>
<a href="http://www.cnblogs.com/stephen-liu74/category/343171.html">http://www.cnblogs.com/stephen-liu74/category/343171.html</a>

<li>
<a href="https://www.braintreepayments.com/braintrust/scaling-postgresql-at-braintree-four-years-of-evolution">https://www.braintreepayments.com/braintrust/scaling-postgresql-at-braintree-four-years-of-evolution</a>

</ul>


<!--// commentwrap Start-->
<!-- 加载duoshuo.com 评论插件 -->
<div id="commentwrap">
<h2>Leave a comment?</h2>
<hr>
    <div id="disqus_thread" style=""></div>

<script type="text/javascript">
    /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */

    var disqus_shortname = 'jackchim'; // required: replace example with your forum shortname

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>


        
</div>
<!--// commentwrap End-->

</div>
<!--// content  End-->
<!--// footer Start-->
<div class="clear">&nbsp;</div>
<div id="footnote" align="center">
	  Cheers!! Vimwiki  © Copyright 2012 Jack Chim. All Rights Reserved.
</div>
<!--// footer End-->
<!-- http://blog.sonitech.org/2011/07/06/sshscp-through-gateway/ -->
</div>

</div>
<a href="javascript:;" id="returnTop" style="bottom: 200px;">回到顶部</a>
<script type="text/javascript">
$(document).ready(function(){
    initTxt();
    //$('#returnTop').hide();
    $(window).scroll(function(){
        if($(document).scrollTop()>=100){
            if($.browser.msie&&($.browser.version == "6.0")){
                $('#returnTop').css("_top","expression(eval(document.documentElement.scrollTop+(document.documentElement.clientHeight/2)-this.offsetHeight-(parseInt(this.currentStyle.marginTop,10)||0)-(parseInt(this.currentStyle.marginBottom,10)||0))-0);");
            }
            $('#returnTop').animate({bottom:"200px"},{ queue: false, duration: 10 });
        }else{
            $('#returnTop').css("_top","1000");
            $('#returnTop').animate({bottom:"-200px"},{ queue: false, duration: 10 });
        }
    });
    $('#returnTop').click(function(){
        $('html, body').animate({scrollTop:0}, 'slow');
        return false;
    });
 
     
});
 
function initTxt(){
    for(var i=0;i<=300;i++){
        $("#bigBox").append("<p>这是第"+i+"行</p>");
    }
}
</script>
</body>
</html>
